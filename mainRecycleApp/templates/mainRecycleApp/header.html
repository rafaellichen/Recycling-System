<!DOCTYPE html>
<html>
<head>
	<title> Home </title>

		{% load static %}
		<link rel="stylesheet" href="{% static "css/bootstrap.min.css" %}">
		<link rel="stylesheet" href="{% static "css/jquery-ui.min.css" %}">
		<link rel="stylesheet" href="{% static "css/jquery-ui.structure.min.css" %}">
		<link rel="stylesheet" href="{% static "css/jquery-ui.theme.min.css" %}">
		<link rel = "stylesheet" href = "{% static "css/style.css" %}">
		<link href="{% static "css/font-awesome.min.css" %}" rel="stylesheet" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
		<link href="{% static "img/favicon.ico" %}" rel="shortcut icon">
		<link href="{% static "css/grayscale.css" %}" rel="stylesheet">
    <style>
        .bg-custom-navbar {
            background-color: #FFFFFF;
        }
        
       
    </style>
</head>
<body>
  <div>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark bg-custom-navbar">

  <img id="logo-png" src="{% static "img/logo2.png" %}" style="max-height : 40px; width:auto;" class="">

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
      </li>

      <li class="nav-item ">
        <a class="nav-link" href="/about">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/contact">Contact</a>
      </li>
      <!-- <li class="nav-item">
        <a class="nav-link" href="/feedback">Feedback</a>
      </li> -->

    </ul>

		<ul class="nav navbar-nav navbar-right">
			{% if request.user.is_anonymous != True %}
			<li class="nav-item"><a class="nav-link" href="/profile"><span class="glyphicon glyphicon-user"></span>{{request.user.last_name}}'s Profile</a></li>
			<li class="nav-item"><a class="nav-link" id="logout" href="#"><span class="glyphicon glyphicon-user"></span>Logout</a></li>
			{% else %}
			<li class="nav-item"><a class="nav-link" href="/signup"><span class="glyphicon glyphicon-user"></span>Signup</a></li>
			<li class='nav-item'><a class="nav-link" href="/login"><span class="glyphicon glyphicon-log-in"></span>Login</a></li>
			{% endif %}
		</ul>
  </div>
</nav>

		{% block content %}
		{% endblock %}

		{%block body%}
		{%endblock%}

	</div>
  

	{% load static %}
	<script src="{% static "js/jquery-3.2.1.js" %}" type='text/javascript'></script>
	<script src="{% static "js/tooltip.js" %}" type='text/javascript'></script>
	<script src="{% static "js/popper.js" %}" type='text/javascript'></script>
	<script src="{% static "js/bootstrap.min.js" %}" type='text/javascript'></script>

	<script src="{% static "js/jquery-ui.min.js" %}" type="text/javascript"></script>


    <script>
 $(document).ready(function() {
	 // document.getElementById("logo-png").className+= " img-fluid";


    //send the message by click
    $(".chat-send").click(sendMsg);

    //press enter to send
    $("form").keypress(function(event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            sendMsg();
        }
    });

    //clear the chat box
    $(".chat-clear").click(clearChatBox);
});

//send message to chat box
function sendMsg() {
    var msg = $(".chat-message");
    var msgVal = msg.val();
    var chatBox = $(".chat-box");
    if (msgVal) {
        var msgAppend = "<p><span id='you'>You: </span>" + msgVal + "</p><hr class='you-hr'>";
        chatBox.append(msgAppend);
    } else {}

    //dialog reply
    dialog(msgVal);

    //empty input
    msg.val("");

    //keep the scroll in bottom
    chatBox.scrollTop(chatBox[0].scrollHeight);
}

//set up the AI dialog
function dialog(msg){
    var replyArr = ["Hi, this is Easy Recycle! How can I help you?(hints:how it works, how it charges)","Just login or find something in home page!","Our service is totally free!","Call us right now!", "We open Monday-Friday from 10:00AM-06:00PM","My name is Easy Recycle","You could see and leave a feedback on your profile","Sorry, I don't understand!"];
    msg = msg.toLowerCase();
    var time = new Date();
    var hour = time.getHours();
    var minute = time.getMinutes();
    var currentTime = plusZero(hour) + ":" + plusZero(minute);

    var chatBox = $(".chat-box");

    if(msg.indexOf("hi") != -1 || msg.indexOf("hello") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[0] + "</p><hr class='ai-hr'>");
    }
    else if(msg.indexOf("work") != -1 || msg.indexOf("how it works") != -1 || msg.indexOf("where can i find recycling center") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[1] + "</p><hr class='ai-hr'>");
    }
    else if(msg.indexOf("charge") != -1 || msg.indexOf("how it charges") != -1 || msg.indexOf("how much should i pay") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[2] + "</p><hr class='ai-hr'>");
    }
    else if(msg.indexOf("help") != -1 || msg.indexOf("I need help") != -1 || msg.indexOf("I have other problems") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[3] + "</p><hr class='ai-hr'>");
    }
    else if(msg.indexOf("what is your office time") != -1 || msg.indexOf("office time") != -1 || msg.indexOf("visit time") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[4] + "</p><hr class='ai-hr'>");
    }
    else if(msg.indexOf("name") != -1 || msg.indexOf("your name") != -1 || msg.indexOf("what is your name") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[5] + "</p><hr class='ai-hr'>");
    }
     else if(msg.indexOf("feedback") != -1 || msg.indexOf("where can I see feedback") != -1 || msg.indexOf("how good is your website") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[6] + "</p><hr class='ai-hr'>");
    }
    else if(msg.indexOf("time") != -1){
        chatBox.append("<p><span id='ai'>Customer Service: </span>Current Time: " + currentTime + ". " + timeGreeting(hour) + "~ :)</p><hr class='ai-hr'>");
    }
    else {
        chatBox.append("<p><span id='ai'>Customer Service: </span>" + replyArr[7] + "</p><hr class='ai-hr'>");
    }
}

//add 0 if time number is <10
function plusZero(x){
    if(x < 10){
        x = "0" + x;
    }
    else {
        x = x;
    }
    return x;
}

//greeting by hour
function timeGreeting(h){
    var greeting = ["U need to sleep","Good morning","Lunch time now","Feel asleep? Have some coffee","Free time~Yeah","Good night"];

    if(h>=0&&h<=6){
        return greeting[0];
    }
    else if(h>=7&&h<=10){
        return greeting[1];
    }
    else if(h>=11&&h<=13){
        return greeting[2];
    }
    else if(h>=14&&h<=18){
        return greeting[3];
    }
    else if(h>=19&&h<=21){
        return greeting[4];
    }
    else if(h>=22&&h<=23){
        return greeting[5];
    }
    else {
        return "";
    }
}

//clear the chat box
function clearChatBox() {
    $(".chat-box").html("");
}



{% if request.user.is_anonymous != True %}

;
(function() {
	$('#logout').click(function() {
		$.post("/logout", function() {
			window.location.href = '/';
		});
	});
})();

{% else %}

// $(function() {
// 	$('#trigger').click(function(e) {
// 		e.preventDefault();
// 		var dialog = $('<p>Registration Required. Already a member?</p>').dialog({
// 			buttons: {
// 				"Login": function() {
// 					window.location.replace("/login");
// 				},
// 				"Signup": function() {
// 					window.location.replace("/signup");
// 				},
// 				"Close": function() {
// 					dialog.dialog('close');
// 				}
// 			}
// 		});
// 	});
// });

{% endif %}

</script>

</body>

<footer class="footer">
	
    <div class="container">
        <div class="row">
            <div class="col-md-5">
                <h5><i class="fa fa-recycle"></i> Easy Recycle </h5>
                <div class="row">
                    <div class="col-6">
                        <ul class="list-unstyled">
                            <li><a href="/">Product</a></li>
                            <li><a href="/login">Benefits</a></li>
                            <li><a href="/">Partners</a></li>
                            <li><a href="/about">Team</a></li>
                        </ul>
                    </div>
                    <div class="col-6">
                        <ul class="list-unstyled">
                            <li><a href="/about">Documentation</a></li>
                            <li><a href="/contact">Support</a></li>
                            <li><a href="/about">Legal Terms</a></li>
                            <li><a href="/about">About</a></li>
                        </ul>
                    </div>
                </div>
                <ul class="nav">
                    <li class="nav-item"><a href="/" class="nav-link pl-0"><i class="fa fa-facebook fa-lg"></i></a></li>
                    <li class="nav-item"><a href="/" class="nav-link"><i class="fa fa-twitter fa-lg"></i></a></li>
                    <li class="nav-item"><a href="/" class="nav-link"><i class="fa fa-github fa-lg"></i></a></li>
                    <li class="nav-item"><a href="/" class="nav-link"><i class="fa fa-instagram fa-lg"></i></a></li>
                </ul>
                <br>
            </div>
            <div class="col-md-2">
                <h5 class="text-md-right">Contact Us</h5>
                <hr>
            </div>
            <div class="col-md-5">
                <form>
                    <fieldset class="form-group">
                      <input type="text" class="form-control" id="exampleInputName" placeholder="Enter Name">
                    </fieldset>
                    <fieldset class="form-group">
                        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter Email">
                    </fieldset>
                    <fieldset class="form-group">
                        <textarea class="form-control" id="exampleMessage" placeholder="Message"></textarea>
                    </fieldset>
                    <fieldset class="form-group text-xs-right">
                        <button type="button" class="btn btn-secondary-outline btn-lg">Send</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</footer>

</html>

